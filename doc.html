<!DOCTYPE html>
<html lang="ru">
<head>
    <title>ULight Engine - Полная документация API</title>
    <link rel="icon" href="light.ico" type="image/x-icon" />
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        h1, h2, h3, h4 {
            color: #2c3e50;
            margin-top: 24px;
            margin-bottom: 16px;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            background-color: #f0f7fd;
            padding: 10px;
            border-left: 4px solid #3498db;
        }
        
        .class-container {
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .method {
            background: #f8f9fa;
            border-left: 3px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        .method-name {
            font-weight: bold;
            color: #2980b9;
            font-size: 1.1em;
        }
        
        .method-params {
            color: #7f8c8d;
            font-style: italic;
        }
        
        .method-return {
            color: #27ae60;
        }
        
        .method-desc {
            margin-top: 10px;
        }
        
        code {
            selector: rgb(255, 255, 255);
            background: #f0f0f0;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ULight Engine API Documentation</h1>
    
    <div class="class-container">
        <h2>InputSystem</h2>
        <p>Класс для работы с вводом (клавиатура и мышь)</p>
        
        <div class="method">
            <div class="method-name">Keys(key)</div>
            <div class="method-params">Параметры: key (string) - клавиша из списка Keys</div>
            <div class="method-return">Возвращает: boolean - состояние клавиши (нажата/не нажата)</div>
            <div class="method-desc">
                Проверяет состояние указанной клавиши. Возвращает true, если клавиша нажата, и false в противном случае.
                <pre><code>// Пример: Проверка нажатия клавиши W для движения вперед
if (InputSystem.Keys(Keys.W)) {
    player.MoveForward(Time.DeltaTime());
}

// Пример: Комбинация клавиш Shift + Space
if (InputSystem.Keys(Keys.SPACE) && InputSystem.Keys(Keys.LSHIFT)) {
    player.Jump();
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">MousePos()</div>
            <div class="method-return">Возвращает: [number, number] - позиция мыши [x, y]</div>
            <div class="method-desc">
                Возвращает текущую позицию курсора мыши в виде массива [x, y]. Координата Y инвертирована (увеличивается сверху вниз).
                <pre><code>// Пример: Получение позиции мыши и отображение в тексте
let mousePos = InputSystem.MousePos();
VariableSystem.NewText(
    `Mouse: ${mousePos[0].toFixed(0)}, ${mousePos[1].toFixed(0)}`, 
    [0, 0, -5], 
    0.5, 
    [255, 255, 255], 
    0
);

// Пример: Использование позиции мыши для цели
function update() {
    let pos = InputSystem.MousePos();
    crosshair.SetPosition(pos[0], pos[1], 0);
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">MouseClick()</div>
            <div class="method-return">Возвращает: [boolean, boolean] - состояния кнопок [ЛКМ, ПКМ]</div>
            <div class="method-desc">
                Возвращает состояния кнопок мыши: первый элемент массива - левая кнопка, второй - правая.
                <pre><code>// Пример: Обработка кликов мыши
let clicks = InputSystem.MouseClick();

if (clicks[0]) { // ЛКМ
    player.Shoot();
}

if (clicks[1]) { // ПКМ
    player.Aim();
}

// Пример: Проверка двойного клика
let lastClickTime = 0;
if (clicks[0] && Time.Time() - lastClickTime < 0.3) {
    player.DoubleClickAction();
    lastClickTime = 0;
} else if (clicks[0]) {
    lastClickTime = Time.Time();
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">SetMousePos(x, y)</div>
            <div class="method-params">Параметры: x (number), y (number) - новые координаты</div>
            <div class="method-desc">
                Устанавливает позицию курсора мыши в указанные координаты. Полезно для фиксации курсора в центре экрана в FPS-играх.
                <pre><code>// Пример: Фиксация мыши в центре экрана
let windowSize = Engine.WindowSize();
InputSystem.SetMousePos(windowSize[0]/2, windowSize[1]/2);

// Пример: Перемещение мыши к определенному UI-элементу
function showTutorial() {
    InputSystem.SetMousePos(buttonPosX, buttonPosY);
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">SetMouseVisible(visible)</div>
            <div class="method-params">Параметры: visible (boolean) - видимость курсора</div>
            <div class="method-desc">
                Управляет видимостью курсора мыши. Принимает true для показа и false для скрытия.
                <pre><code>// Пример: Скрытие курсора в игровом режиме
function startGame() {
    InputSystem.SetMouseVisible(false);
}

// Пример: Показ курсора в меню
function showMenu() {
    InputSystem.SetMouseVisible(true);
}</code></pre>
            </div>
        </div>
    </div>
    
    <div class="class-container">
        <h2>Engine</h2>
        <p>Основные функции движка</p>
        
        <div class="method">
            <div class="method-name">SetOS(os)</div>
            <div class="method-params">Параметры: os (string) - "Win" или "Web"</div>
            <div class="method-desc">
                Устанавливает целевую операционную систему для разработки игры. Это влияет на оптимизацию и доступные функции.
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">WindowSize()</div>
            <div class="method-return">Возвращает: [number, number] - размер окна [ширина, высота]</div>
            <div class="method-desc">
                Возвращает текущий размер игрового окна. Полезно для адаптивного интерфейса.
                <pre><code>// Пример: Центрирование объекта
let size = Engine.WindowSize();
let centerX = size[0] / 2;
let centerY = size[1] / 2;
title.SetPosition(centerX, centerY, 0);

// Пример: Проверка соотношения сторон
function isWidescreen() {
    let size = Engine.WindowSize();
    return size[0] / size[1] > 1.7;
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">Quit()</div>
            <div class="method-desc">
                Завершает работу приложения. В веб-версии может закрыть вкладку или показать сообщение.
                <pre><code>// Пример: Выход из игры при нажатии ESC
function update() {
    if (InputSystem.Keys(Keys.ESCAPE)) {
        Engine.Quit();
    }
}

// Пример: Кнопка выхода в меню
exitButton.onClick = function() {
    Engine.Quit();
};</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">System(text)</div>
            <div class="method-params">Параметры: text (string) - команда для вашей os</div>
            <div class="method-desc">
                Устанавливает системный текст. В зависимости от платформы может использоваться для заголовка окна, уведомления и т.д.
                <pre><code>// Пример: Установка заголовка окна
Engine.System("@echo off");
}</code></pre>
            </div>
        </div>
    </div>
    
    <div class="class-container">
        <h2>Camera</h2>
        <p>Управление камерой</p>
        
        <div class="method">
            <div class="method-name">SetCameraPos([x, y, z])</div>
            <div class="method-params">Параметры: [x, y, z] (number[]) - новая позиция</div>
            <div class="method-desc">
                Устанавливает позицию камеры в 3D пространстве. Камера всегда смотрит вдоль оси Z.
                <pre><code>// Пример: Установка камеры над игроком
Camera.SetCameraPos([player.x, player.y + 5, player.z + 3]);

// Пример: Камера для 2D платформера
Camera.SetCameraPos([player.x, player.y, 10]);</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">SetCameraRotate([x, y, z])</div>
            <div class="method-params">Параметры: [x, y, z] (number[]) - новые углы вращения</div>
            <div class="method-desc">
                Устанавливает вращение камеры по осям X, Y, Z в градусах.
                <pre><code>// Пример: Наклон камеры для эффекта "ранен"
function applyDamageEffect() {
    Camera.SetCameraRotate([0, 0, 15]);
    setTimeout(() => Camera.SetCameraRotate([0, 0, 0]), 500);
}

// Пример: Камера от первого лица
function updateFPS() {
    let mouseMove = InputSystem.MousePos();
    Camera.SetCameraRotate([-mouseMove[1]/10, mouseMove[0]/10, 0]);
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">GetCameraPos()</div>
            <div class="method-return">Возвращает: [number, number, number] - позиция камеры [x, y, z]</div>
            <div class="method-desc">
                Возвращает текущую позицию камеры. Полезно для расчета эффектов или создания объектов относительно камеры.
                <pre><code>// Пример: Создание эффекта перед камерой
function createMuzzleFlash() {
    let camPos = Camera.GetCameraPos();
    let flash = new ParticleSystem(camPos[0], camPos[1], camPos[2]);
}

// Пример: Проверка расстояния от камеры до объекта
function isVisible(object) {
    let camPos = Camera.GetCameraPos();
    let dist = Math.sqrt(
        Math.pow(object.x - camPos[0], 2) +
        Math.pow(object.y - camPos[1], 2) +
        Math.pow(object.z - camPos[2], 2)
    );
    return dist < renderDistance;
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">GetCameraRotate()</div>
            <div class="method-return">Возвращает: [number, number, number] - вращение камеры [x, y, z]</div>
            <div class="method-desc">
                Возвращает текущее вращение камеры в градусах. Полезно для кастомизации управления.
                <pre><code>// Пример: Ограничение вертикального вращения камеры
function updateCamera() {
    let rotation = Camera.GetCameraRotate();
    rotation[0] = Math.max(-60, Math.min(60, rotation[0])); // Ограничение по вертикали
    Camera.SetCameraRotate(rotation);
}

// Пример: Сглаживание вращения камеры
let targetRotation = [0, 0, 0];
function update() {
    let current = Camera.GetCameraRotate();
    let smooth = [
        lerp(current[0], targetRotation[0], 0.1),
        lerp(current[1], targetRotation[1], 0.1),
        lerp(current[2], targetRotation[2], 0.1)
    ];
    Camera.SetCameraRotate(smooth);
}</code></pre>
            </div>
        </div>
    </div>
    
    <div class="class-container">
        <h2>Time</h2>
        <p>Работа со временем</p>
        
        <div class="method">
            <div class="method-name">Time()</div>
            <div class="method-return">Возвращает: number - текущее время в секундах</div>
            <div class="method-desc">
                Возвращает время с момента запуска игры в секундах. Полезно для таймеров и анимаций.
                <pre><code>// Пример: Таймер обратного отсчета
let startTime = Time.Time();
function update() {
    let elapsed = Time.Time() - startTime;
    if (elapsed > 60) {
        endGame();
    }
    timerText.text = `Time: ${60 - Math.floor(elapsed)}`;
}

// Пример: Мигание объекта
function update() {
    let visible = Math.sin(Time.Time() * 5) > 0;
    warningSign.visible = visible;
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">DeltaTime()</div>
            <div class="method-return">Возвращает: number - время между кадрами в секундах</div>
            <div class="method-desc">
                Возвращает время, прошедшее между последним и текущим кадром (в секундах). Используйте для плавного движения независимо от FPS.
                <pre><code>// Пример: Движение с постоянной скоростью
const SPEED = 5;
function update() {
    if (InputSystem.Keys(Keys.W)) {
        player.MoveForward(SPEED * Time.DeltaTime());
    }
}

// Пример: Плавное затухание
function update() {
    alpha -= Time.DeltaTime();
    if (alpha <= 0) {
        Destroy(this);
    }
}</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">FPS()</div>
            <div class="method-return">Возвращает: number - текущий FPS</div>
            <div class="method-desc">
                Возвращает текущее количество кадров в секунду. Полезно для отладки производительности.
                <pre><code>// Пример: Отображение FPS
function update() {
    fpsText.text = `FPS: ${Math.floor(Time.FPS())}`;
}

// Пример: Динамическое качество графики
function update() {
    if (Time.FPS() < 30) {
        reduceGraphicsQuality();
    }
}</code></pre>
            </div>
        </div>
    </div>
    
    <div class="class-container">
        <h2>VariableSystem</h2>
        <p>Система работы с игровыми объектами</p>
        
        <div class="method">
            <div class="method-name">RenderObjects()</div>
            <div class="method-desc">
                Очищает списки объектов и текстов для рендеринга. Должен вызываться в начале каждого кадра.
                <pre><code>// Пример: Основной цикл рендеринга
function mainLoop() {
    VariableSystem.RenderObjects();
    
    // Рендеринг всех объектов
    renderGameObjects();
    renderUI();
    
    requestAnimationFrame(mainLoop);
}
mainLoop();</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">NewSprite(textureEnumerate, position, scale, rotate)</div>
            <div class="method-params">Параметры: 
                textureEnumerate (number) - индекс текстуры, 
                position ([x, y, z]) - позиция в мире, 
                scale ([x, y, z]) - масштаб, 
                rotate ([x, y, z]) - вращение в градусах
            </div>
            <div class="method-desc">
                Создает новый спрайт для рендеринга в текущем кадре.
                <pre><code>// Пример: Рендеринг спрайта игрока
VariableSystem.NewSprite(
    TEXTURE_PLAYER, 
    [player.x, player.y, player.z], 
    [1, 1, 1], 
    [0, 0, player.rotation]
);

// Пример: Анимированный спрайт
let frame = Math.floor(Time.Time() * 10) % 4;
VariableSystem.NewSprite(
    TEXTURE_EXPLOSION_START + frame,
    [explosion.x, explosion.y, explosion.z],
    [2, 2, 2],
    [0, 0, 0]
);</code></pre>
            </div>
        </div>
        
        <div class="method">
            <div class="method-name">NewText(mytext, position, scale, color, idfont)</div>
            <div class="method-params">Параметры: 
                mytext (string) - текст для отображения, 
                position ([x, y, z]) - позиция в мире, 
                scale (number) - размер текста, 
                color ([r, g, b]) - цвет в RGB, 
                idfont (number) - индекс шрифта
            </div>
            <div class="method-desc">
                Создает новый текст для рендеринга в текущем кадре.
                <pre><code>// Пример: Отображение счета
VariableSystem.NewText(
    `Score: ${player.score}`,
    [10, 10, 0],
    0.8,
    [255, 255, 0],
    FONT_MAIN
);

// Пример: 3D текст в мире
VariableSystem.NewText(
    "ДОБРО ПОЖАЛОВАТЬ",
    [0, 5, -10],
    1.5,
    [255, 100, 0],
    FONT_TITLE
);</code></pre>
            </div>
        </div>
    </div>
    
    <div class="class-container">
        <h2>Keys</h2>
        <p>Константы для клавиш клавиатуры</p>
        <div class="method-desc">
            Содержит все поддерживаемые клавиши клавиатуры для использования с InputSystem.Keys().
            <pre><code>// Пример: Проверка различных клавиш
if (InputSystem.Keys(Keys.SPACE)) {
    // Пробел нажат
}

if (InputSystem.Keys(Keys.ESCAPE)) {
    // ESC нажата
}

if (InputSystem.Keys(Keys.F1)) {
    // F1 нажата
}

// Полный список доступных клавиш:
Keys = {
    Q: "q", W: "w", E: "e", R: "r", T: "t", Y: "y", U: "u", I: "I", O: "o", P: "p",
    A: "a", S: "s", D: "d", F: "f", G: "g", H: "h", J: "j", K: "k", L: "l",
    Z: "z", X: "x", C: "c", V: "v", B: "b", N: "n", M: "m",
    F1: "f1", F2: "f2", F3: "f3", F4: "f4", F5: "f5", F6: "f6",
    F7: "f7", F8: "f8", F9: "f9", F10: "f10", F11: "f11", F12: "f12",
    SPACE: "space", ESCAPE: "esc", RCLICK: "rshift", LCLICK: "lshift",
    UP: "up", DOWN: "down", RIGHT: "right", LEFT: "left"
};</code></pre>
        </div>
    </div>
</body>
</html>
